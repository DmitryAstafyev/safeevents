"use strict";var SafeEvents=function(){};SafeEvents.prototype={_divider:"_$$_",_before:"SafeEvents___$",_after:"$___",__prefix:/SafeEvents___\$(.*?)\$___/gi,__clear:/SafeEvents___\$|\$___/gi,events:{},bind:function(n,t){this.events[n]=this.events[n]||[];this.events[n].push(t)},unbind:function(n,t){this.events[n]!==void 0&&~this.events[n].indexOf(t)&&this.events[n].splice(this.events[n].indexOf(t),1)},trigger:function(n){var t=this.chain(),r=Array.prototype.slice.call(arguments,1),i=this;if(~t.indexOf(n))throw new Error("Event ["+n+"] called itself. Full chain: "+t.join(", "));this.events=this.events||{};this.events[n]!==void 0&&(t.push(n),this.events[n].forEach(function(n){setTimeout(function(n,t,r){return function(){var u=new Function("return (function(){ return function "+i._before+n.join(i._divider)+i._after+"(callback){ callback(); };}());")();u(function(){t.apply(i,r)})}}(t,n,r),1)}))},chain:function(){var n=null;try{throw new Error("Stack checking");}catch(t){n=t.stack.match(this.__prefix);n instanceof Array&&n.length===1?(n=n[0].replace(this.__clear,""),n=n!==""?n.split(this._divider):[]):n=[]}return n},safely:function(n){var t=this.chain();return t!==null?new Function("return function(callback){ return function "+this._before+t.join(this._divider)+this._after+"(){ return callback.apply(this, arguments);};};")()(n):n}};SafeEvents.inherit=function(n){var i=typeof n=="function"?n.prototype:typeof n=="object"?n:null,t;if(i!==null){for(t in SafeEvents.prototype)t!=="inherit"&&(i[t]=SafeEvents.prototype[t]);i.events={}}};